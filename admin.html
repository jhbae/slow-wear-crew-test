<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Slow Wear Crew - Admin</title>

    <!-- CSS -->
    <link rel="stylesheet" href="css/admin_org.css">

    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/12.5.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/12.5.0/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/12.5.0/firebase-auth-compat.js"></script>

    <!-- html2pdf.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
</head>
<body>
    <div class="container">
        <!-- ë¡œê·¸ì¸ ë°•ìŠ¤ -->
        <div id="loginBox" class="login-box">
            <h1>ğŸ” Admin Login</h1>
            <div id="loginError" class="error-message"></div>
            <div class="input-group">
                <label>Email</label>
                <input type="email" id="adminEmail" placeholder="admin@slowwearcrew.com">
            </div>
            <div class="input-group">
                <label>Password</label>
                <input type="password" id="adminPassword" placeholder="ë¹„ë°€ë²ˆí˜¸ ì…ë ¥">
            </div>
            <button id="loginBtn" onclick="adminLogin()">Login</button>
        </div>

        <!-- Admin íŒ¨ë„ -->
        <div id="adminPanel" class="admin-panel hidden">
            <h1>ğŸ“Š Slow Wear Crew Admin</h1>
            
            <div class="user-info">
                <span>Logged in as: <span class="user-email" id="userEmail"></span></span>
                <button class="logout-btn" style="width: auto; padding: 8px 20px; margin: 0;" onclick="adminLogout()">Logout</button>
            </div>

            <!-- íƒ­ ë²„íŠ¼ -->
            <div class="tab-buttons">
                <button class="tab-btn active" onclick="switchTab('participants')">Participants</button>
                <button class="tab-btn" onclick="switchTab('sensory')">Sensory Survey</button>
                <button class="tab-btn" onclick="switchTab('progress')">Progress Survey</button>
            </div>

            <!-- Sensory Survey íƒ­ -->
            <div id="sensoryTab" class="tab-content">
                <div class="filter-section">
                    <h3 style="margin-bottom: 15px; color: #667eea;">ğŸ“‹ Select Session</h3>
                    <div class="filter-row">
                        <div style="flex: 2;">
                            <label>Session</label>
                            <select id="sensorySessionFilter">
                                <option value="">-- Select a Session --</option>
                            </select>
                        </div>
                        <button onclick="loadSensoryData()">Load Data</button>
                    </div>
                </div>

                <div id="sensoryContent" style="display: none;">
                    <h3 style="margin: 20px 0; color: #667eea;">ğŸ“Š Session Overview</h3>
                    <div class="stats-grid" id="sensoryStats"></div>
                    
                    <div class="export-section">
                        <button onclick="exportSensoryCSV()">ğŸ“¥ Export CSV</button>
                        <button onclick="exportSensoryJSON()">ğŸ“¥ Export JSON</button>
                    </div>

                    <h3 style="margin: 30px 0 20px 0; color: #667eea;">ğŸ‘¥ Participant Responses</h3>
                    <div class="response-list" id="sensoryResponseList"></div>
                </div>

                <div id="sensoryEmpty" class="empty-state">
                    <div class="empty-state-icon">ğŸ“‹</div>
                    <h3>Select a Session</h3>
                    <p>ì„¸ì…˜ì„ ì„ íƒí•˜ë©´ ì°¸ê°€ìë³„ ì‘ë‹µì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
                </div>
            </div>

            <!-- Progress Survey íƒ­ -->
            <div id="progressTab" class="tab-content">
                <div class="filter-section">
                    <h3 style="margin-bottom: 15px; color: #667eea;">ğŸ“‹ Select Session</h3>
                    <div class="filter-row">
                        <div style="flex: 2;">
                            <label>Session</label>
                            <select id="progressSessionFilter">
                                <option value="">-- Select a Session --</option>
                            </select>
                        </div>
                        <button onclick="loadProgressData()">Load Data</button>
                    </div>
                </div>

                <div id="progressContent" style="display: none;">
                    <h3 style="margin: 20px 0; color: #667eea;">ğŸ“Š Session Overview</h3>
                    <div class="stats-grid" id="progressStats"></div>

                    <div class="export-section">
                        <button onclick="exportProgressCSV()">ğŸ“¥ Export CSV</button>
                        <button onclick="exportProgressJSON()">ğŸ“¥ Export JSON</button>
                    </div>

                    <h3 style="margin: 30px 0 20px 0; color: #667eea;">ğŸ‘¥ Participant Responses</h3>
                    <div class="response-list" id="progressResponseList"></div>
                </div>

                <div id="progressEmpty" class="empty-state">
                    <div class="empty-state-icon">ğŸ“ˆ</div>
                    <h3>Select a Session</h3>
                    <p>ì„¸ì…˜ì„ ì„ íƒí•˜ë©´ ì°¸ê°€ìë³„ ì£¼ì°¨ë³„ ë³€í™” ê¸°ë¡ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
                </div>
            </div>

            <!-- Participants íƒ­ -->
            <div id="participantsTab" class="tab-content active">
                <div class="filter-section">
                    <h3 style="margin-bottom: 15px; color: #667eea;">ğŸ“‹ Select Session</h3>
                    <div class="filter-row">
                        <div style="flex: 2;">
                            <label>Session</label>
                            <select id="participantSessionFilter">
                                <option value="">-- Select a Session --</option>
                            </select>
                        </div>
                        <button onclick="loadParticipantData()">Load Data</button>
                    </div>
                </div>

                <div id="participantContent" style="display: none;">
                    <h3 style="margin: 20px 0; color: #667eea;">ğŸ“Š Session Overview</h3>
                    <div class="stats-grid" id="participantStats"></div>

                    <h3 style="margin: 30px 0 20px 0; color: #667eea;">ğŸ‘¥ Participants</h3>
                    <div class="response-list" id="participantList"></div>
                </div>

                <div id="participantDetailView" style="display: none;">
                    <!-- ê°œë³„ ì°¸ì—¬ì ìƒì„¸ ì •ë³´ê°€ ì—¬ê¸° í‘œì‹œë©ë‹ˆë‹¤ -->
                </div>

                <div id="participantEmpty" class="empty-state">
                    <div class="empty-state-icon">ğŸ‘¥</div>
                    <h3>Select a Session</h3>
                    <p>ì„¸ì…˜ì„ ì„ íƒí•˜ë©´ ì°¸ê°€ì ëª©ë¡ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script src="js/utils.js"></script>
    <script src="js/admin.js"></script>
</body>
</html>
